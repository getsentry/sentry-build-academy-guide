---
title: Getting Started with Sentry
description: Set up Error Monitoring, Logging, Replays, and Tracing in your React frontend and Node.js backend
---

import { Steps } from '@astrojs/starlight/components';
import ScaledImage from '../../components/ScaledImage.astro';

In this module, you'll learn how to set up Sentry monitoring in your fullstack JavaScript application. We'll configure Error Monitoring, Logging, Session Replays, and Tracing for both the Vite React (alongside React Router 7) frontend and the Node.js backend to give you complete visibility into your application's behavior.

## Learning Objectives

By the end of this module, you will:

- Set up Sentry Error Monitoring for both frontend and backend
- Configure Session Replays to debug user interactions
- Implement structured logging across your application
- Set up distributed tracing to track request flows
- Create your first traces and spans with meaningful context

## What is Sentry?

Sentry is an error monitoring and performance monitoring platform that helps developers identify, debug, and resolve issues in their applications. Key features include:

- **Error Monitoring**: Automatic error detection and alerting
- **Session Replays**: Visual recordings of user sessions when errors occur
- **Performance Monitoring**: Distributed tracing and performance insights
- **Logging**: Structured log collection and analysis

## Setting Up Sentry in Your Frontend (Vite + React + React Router 7)

Before you get into the next steps, you should create your frontend and server projects inside your sentry account. 

You'll need to take note of your Sentry DSNs along the way, which you receive when you configure the projects. 

Select `React` and `Node.js` as the platforms respectively.

<Steps>
1. **Install Sentry React SDK and Vite Plugin**

   Install the required Sentry packages for React and Vite integration:

   ```bash
   pnpm add @sentry/react @sentry/vite-plugin
   ```

2. **Configure Vite Plugin for Source Maps**

   Update your `vite.config.js` to include the Sentry Vite plugin for source map uploads:

   ```js
   import { defineConfig } from 'vite'
   import react from '@vitejs/plugin-react'
   import { sentryVitePlugin } from "@sentry/vite-plugin";

   export default defineConfig({
     plugins: [
       react(),
       sentryVitePlugin({
         org: "your-org-slug",
         project: "your-project-slug",
         authToken: process.env.SENTRY_AUTH_TOKEN,
       }),
     ],
     build: {
       sourcemap: true,
     },
   })
   ```

3. **Create Sentry Instrumentation File**

   Create `src/instrument.js` for your Sentry configuration:

   ```js
   import * as Sentry from "@sentry/react";
   import { useEffect } from "react";
   import { useLocation, useNavigationType, createRoutesFromChildren, matchRoutes } from "react-router-dom";

   Sentry.init({
     dsn: '<Your Sentry DSN>',
     sendDefaultPii: true,
     _experiments: {
       enableLogs: true,
     },
     tracesSampleRate: 1.0,
     tracePropagationTargets: ["localhost:3001"],
     replaysSessionSampleRate: 1.0,
     replaysOnErrorSampleRate: 1.0,
   });
   ```

4. **Configure Browser Tracing Integration**

   Add the browser tracing integration to your `instrument.js`:

   ```js
   // Add this to the integrations array in your Sentry.init call
   integrations: [
     Sentry.browserTracingIntegration(),
   ],
   ```

5. **Configure Session Replay Integration**

   Add session replay integration to capture user sessions:

   ```js
   // Add this to the integrations array in your Sentry.init call
   integrations: [
     Sentry.browserTracingIntegration(),
     Sentry.replayIntegration(),
   ],
   ```

6. **Configure React Router 7 Integration**

   Add React Router 7 specific tracing integration:

   ```js
   // Add this to the integrations array in your Sentry.init call
   integrations: [
     Sentry.browserTracingIntegration(),
     Sentry.replayIntegration(),
     Sentry.reactRouterV7BrowserTracingIntegration({
       useEffect: useEffect,
       useLocation,
       useNavigationType,
       createRoutesFromChildren,
       matchRoutes,
     }),
   ],
   ```

7. **Update Main Entry Point**

   Import the instrumentation in your `main.tsx` before any other imports:

   ```js
   import './instrument.js';
   import { createRoot } from 'react-dom/client';
   import * as Sentry from '@sentry/react';
   import App from './App.tsx';
   import './index.css';
   ```

8. **Configure React Error Handling**

   Add Sentry error handlers to your React root in `main.tsx`:

   ```js
   createRoot(document.getElementById('root')!, {
     onUncaughtError: Sentry.reactErrorHandler((error, errorInfo) => {
       console.warn('Uncaught error', error, errorInfo.componentStack);
     }),
     onCaughtError: Sentry.reactErrorHandler(),
     onRecoverableError: Sentry.reactErrorHandler(),
   }).render(
     <App />
   );
   ```

9. **Create Error Boundary Component**

   Create `src/components/ErrorBoundary.tsx` for route-level error handling:

   ```tsx
   import * as Sentry from '@sentry/react';
   import { useRouteError, isRouteErrorResponse } from 'react-router-dom';
   import React from 'react';

   const ErrorBoundary = () => {
     const error = useRouteError();

     React.useEffect(() => {
       // Send route errors to Sentry
       if (error) {
         Sentry.captureException(error);
       }
     }, [error]);

     if (isRouteErrorResponse(error)) {
       return (
         <div className="min-h-screen flex items-center justify-center bg-gray-50">
           <div className="text-center">
             <h1 className="text-4xl font-bold text-red-600 mb-4">{error.status}</h1>
             <p className="text-xl text-gray-600 mb-4">{error.statusText}</p>
             <p className="text-gray-500">{error.data}</p>
           </div>
         </div>
       );
     }

     return (
       <div className="min-h-screen flex items-center justify-center bg-gray-50">
         <div className="text-center">
           <h1 className="text-2xl font-bold text-red-600 mb-4">Something went wrong</h1>
           <p className="text-gray-600 mb-4">
             {error instanceof Error ? error.message : 'Unknown error occurred'}
           </p>
           <button 
             onClick={() => window.location.reload()}
             className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
           >
             Reload page
           </button>
         </div>
       </div>
     );
   };

   export default ErrorBoundary;
   ```

10. **Configure Sentry Router Wrapper**

    Import Sentry router wrapper in your `App.tsx`:

    ```tsx
    import * as Sentry from '@sentry/react';
    import ErrorBoundary from './components/ErrorBoundary';

    const SentryRoutes = Sentry.withSentryReactRouterV7Routing(Routes);
    ```

11. **Add Error Boundaries to Routes**

    Update your route configuration to include error boundaries:

    ```tsx
    function App() {
      return (
        <AuthProvider>
          <UserStateProvider>
            <Router>
              <SentryRoutes>
                <Route path="/login" element={<LoginPage />} errorElement={<ErrorBoundary />} />
                <Route path="/" element={<HomePage />} errorElement={<ErrorBoundary />} />
                {/* Add errorElement={<ErrorBoundary />} to all routes you want monitored */}
              </SentryRoutes>
            </Router>
          </UserStateProvider>
        </AuthProvider>
      );
    }
    ```
</Steps>

These configurations will setup your React frontend to leverage all of Sentry's core capabilities and ensure you're capturing Errors, Traces, Logs, and Replays within your frontend application. Let's move onto the backend.

## Configuring Sentry in your Backend (Node.js)

<Steps>
1. **Install Sentry Node SDK**

   Install the Sentry SDK for your Node.js server:

   ```bash
   pnpm add @sentry/node
   ```

2. **Create Server Instrumentation File**

   Create `instrument.ts` in your server directory:

   ```js
   import * as Sentry from '@sentry/node';

   Sentry.init({
     dsn: '<Your Sentry DSN>',
     _experiments: {
       enableLogs: true,
     },
     debug: true,
     tracesSampleRate: 1.0,
   });
   ```

3. **Import Instrumentation in Server Entry Point**

   Add the instrumentation import at the very top of your `index.ts`:

   ```js
   import './instrument.ts';
   
   // ... rest of your imports and server code
   ```

4. **Configure Express Error Handler**

   Add Sentry's Express error handler after all routes but before other error middleware:

   ```js
   // Add this after all routes,
   // but before any and other error-handling middlewares are defined.
   Sentry.setupExpressErrorHandler(app);
   ```

5. **Install Sentry ESBuild Plugin**

   Install the plugin for source map uploads:

   ```bash
   pnpm add @sentry/esbuild-plugin
   ```

6. **Configure ESBuild with Sentry Plugin**

   Update your `build.js` to include Sentry source map uploads:

   ```js
   import 'dotenv/config';
   import esbuild from 'esbuild';
   import { sentryEsbuildPlugin } from '@sentry/esbuild-plugin';

   esbuild.build({
     entryPoints: ['index.ts'],
     sourcemap: true,
     bundle: true,
     minify: true,
     platform: 'node',
     format: 'cjs',
     outdir: 'dist',
     allowOverwrite: true,
     external: ['express', 'drizzle-orm', 'pg'],
     plugins: [
       sentryEsbuildPlugin({
         authToken: process.env.SENTRY_AUTH_TOKEN,
         org: process.env.SENTRY_ORG,
         project: process.env.SENTRY_PROJECT,
         sourcemaps: {
           filesToDeleteAfterUpload: ['**/*.js.map'],
         },
       }),
     ],
   });
   ```

7. **Configure Source Maps with Sentry Wizard**

   Run the Sentry wizard to complete source map setup:

   ```bash
   npx @sentry/wizard@latest -i sourcemaps
   ```

8. **Restart Your Application**

   Restart the development server to apply all configurations:

   ```bash
   pnpm run dev
   ```
</Steps>

With these configurations in place, you've now got Sentry setup to monitor your application across both the frontend and server side implementations. 

Once that's loaded, you can browse to https://localhost:5173 to view Sentry Academy. 

<ScaledImage 
  src="/assets/img/academy.png" 
  alt="Academy" 
  size={80}
  caption="Academy" 
/>