---
title: Getting Started with Sentry
description: Set up Error Monitoring, Logging, Replays, and Tracing in your React frontend and Node.js backend
---

import { Steps } from '@astrojs/starlight/components';
import ScaledImage from '../../components/ScaledImage.astro';

In this module, you'll learn how to set up Sentry monitoring in your fullstack JavaScript application. We'll configure Error Monitoring, Logging, Session Replays, and Tracing for both the Vite React (alongside React Router 7) frontend and the Node.js backend to give you complete visibility into your application's behavior.

## Learning Objectives

By the end of this module, you will:

- Set up Sentry Error Monitoring for both frontend and backend
- Configure Session Replays to debug user interactions
- Implement structured logging across your application
- Set up distributed tracing to track request flows
- Create your first traces and spans with meaningful context

## What is Sentry?

Sentry is an error monitoring and performance monitoring platform that helps developers identify, debug, and resolve issues in their applications. Key features include:

- **Error Monitoring**: Automatic error detection and alerting
- **Session Replays**: Visual recordings of user sessions when errors occur
- **Performance Monitoring**: Distributed tracing and performance insights
- **Logging**: Structured log collection and analysis

## Setting Up Sentry in Your Frontend (Vite + React + React Router 7)

<Steps>
1. **Install Sentry SDK**

   ```bash
   pnpm add @sentry/react @sentry/vite-plugin
   ```

2. **Configure Vite Plugin**

   Update your `vite.config.js`:

   ```js
   import { defineConfig } from 'vite'
   import react from '@vitejs/plugin-react'
   import { sentryVitePlugin } from "@sentry/vite-plugin";

   export default defineConfig({
     plugins: [
       react(),
       sentryVitePlugin({
         org: "your-org-slug",
         project: "your-project-slug",
         authToken: process.env.SENTRY_AUTH_TOKEN,
       }),
     ],
     build: {
       sourcemap: true,
     },
   })
   ```

3. **Initialize Sentry**

   Create `src/instrument.js`:

   ```js
   import * as Sentry from "@sentry/react";
   import { useEffect } from "react";
   import { useLocation, useNavigationType, createRoutesFromChildren, matchRoutes } from "react-router-dom";

   Sentry.init({
     dsn: process.env.SENTRY_DSN,

     
     sendDefaultPii: true,

     integrations: [
       Sentry.browserTracingIntegration(),
       Sentry.replayIntegration(),
       Sentry.reactRouterV7BrowserTracingIntegration({
           useEffect: useEffect,
           useLocation,
           useNavigationType,
           createRoutesFromChildren,
           matchRoutes,
         }),
     ],

     _experiments: {
       enableLogs: true,
     },

     tracesSampleRate: 1.0,

     tracePropagationTargets: ["localhost:3001"],

     replaysSessionSampleRate: 1.0,
     replaysOnErrorSampleRate: 1.0,
   });
   ```

4. **Import and update your `main.tsx` entry point**

   ```js
   import './instrument.js';
   import { createRoot } from 'react-dom/client';
   import * as Sentry from '@sentry/react';
   import App from './App.tsx';
   import './index.css';

   createRoot(document.getElementById('root')!, {
     // Callback called when an error is thrown and not caught by an ErrorBoundary.
     onUncaughtError: Sentry.reactErrorHandler((error, errorInfo) => {
       console.warn('Uncaught error', error, errorInfo.componentStack);
     }),
     // Callback called when React catches an error in an ErrorBoundary.
     onCaughtError: Sentry.reactErrorHandler(),
     // Callback called when React automatically recovers from errors.
     onRecoverableError: Sentry.reactErrorHandler(),
     }).render(
       <App />
     );
   ```

5. **Create your ErrorBoundary**

   ```tsx
   import * as Sentry from '@sentry/react';
   import { useRouteError, isRouteErrorResponse } from 'react-router-dom';
   import React from 'react';

   const ErrorBoundary = () => {
     const error = useRouteError();

     React.useEffect(() => {
       // Send route errors to Sentry
       if (error) {
         Sentry.captureException(error);
       }
     }, [error]);

     if (isRouteErrorResponse(error)) {
       return (
         <div className="min-h-screen flex items-center justify-center bg-gray-50">
           <div className="text-center">
             <h1 className="text-4xl font-bold text-red-600 mb-4">{error.status}</h1>
             <p className="text-xl text-gray-600 mb-4">{error.statusText}</p>
             <p className="text-gray-500">{error.data}</p>
           </div>
         </div>
       );
     }

     return (
       <div className="min-h-screen flex items-center justify-center bg-gray-50">
         <div className="text-center">
           <h1 className="text-2xl font-bold text-red-600 mb-4">Something went wrong</h1>
           <p className="text-gray-600 mb-4">
             {error instanceof Error ? error.message : 'Unknown error occurred'}
           </p>
           <button 
             onClick={() => window.location.reload()}
             className="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700"
           >
             Reload page
           </button>
         </div>
       </div>
     );
   };

   export default ErrorBoundary;
   ```

6. **Update your `App.tsx` to include Sentry Error Boundary and React Router**

   ```tsx
   import * as Sentry from '@sentry/react';
   import ErrorBoundary from './components/ErrorBoundary';

   const SentryRoutes = Sentry.withSentryReactRouterV7Routing(Routes);

      // Existing content

   function App() {
     return (
       <AuthProvider>
         <UserStateProvider>
           <Router>
             <SentryRoutes>
               <Route path="/login" element={<LoginPage />} errorElement={<ErrorBoundary />} />
               // Include the <ErrorBoundary /> component in any route that you want to be monitored by Sentry
   ```
</Steps>

These configurations will setup your React frontend to leverage all of Sentry's core capabiltiies and ensure you're capturing Errors, Traces, Logs, and Replays within your frontend application. Let's move onto the backend.

## Configuring Sentry in your Backend (Node.js)

<Steps>
1. **Install Sentry SDK for Node.js**

   ```bash
   pnpm add @sentry/node
   ```

2. **Configure Sentry in your Node.js Server**

   Create `instrument.ts` in your server directory:

   ```js
   import * as Sentry from '@sentry/node';

   Sentry.init({
     dsn: 'https://3a9b93c0dffb8559153ce45a04fcbc50@o4508130833793024.ingest.us.sentry.io/4509441326120960',

     _experiments: {
       enableLogs: true,
     },

     debug: true,

     tracesSampleRate: 1.0,
   });
   ```

2. **Add instrument.ts to your server entry point - index.ts**

   ```js
   import './instrument.ts';

   // Add this after all routes,
   // but before any and other error-handling middlewares are defined.
   Sentry.setupExpressErrorHandler(app);
   ```

3. **Update the esbuild configuration to include Sentry**

   Edit `build.js` to include Sentry

   ```js
   import 'dotenv/config';
   import esbuild from 'esbuild';
   import { sentryEsbuildPlugin } from '@sentry/esbuild-plugin';

   esbuild.build({
     entryPoints: ['index.ts'],
     sourcemap: true,
     bundle: true,
     minify: true,
     platform: 'node',
     format: 'cjs',
     outdir: 'dist',
     allowOverwrite: true,
     external: ['express', 'drizzle-orm', 'pg'],
     plugins: [
       sentryEsbuildPlugin({
         authToken: process.env.SENTRY_AUTH_TOKEN,
         org: process.env.SENTRY_ORG,
         project: process.env.SENTRY_PROJECT,
         sourcemaps: {
           filesToDeleteAfterUpload: ['**/*.js.map'],
         },
       }),
     ],
   });
   ```

4. **Move through the Source Map configuration**

   ```bash
   npx @sentry/wizard@latest -i sourcemaps
   ```

</Steps>


With these configurations in place, you've now got Sentry setup to monitor your application acrosss both the frontend and server side implementations. 

If you are running your application currently, it might be a good idea to toss a restart on it after all of these configurations. 

```bash
pnpm run dev
```

Once thats loaded, you can browse to https://localhost:5173 to view Sentry Academy. 

![Span View](/src/assets/img/academy.png)

However... when we try to login, we find that thing's might not be working quite as expected... 

 <ScaledImage 
      src="/assets/img/academy-error.png" 
      alt="Academy Error" 
      size={50}
      caption="Academy Error" 
     />

